{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _reactNative = require(\"react-native\");\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _native = require(\"@react-navigation/native\");\nvar _nativeStack = require(\"@react-navigation/native-stack\");\nvar _SignInScreen = _interopRequireDefault(require(\"../screens/SignInScreen\"));\nvar _SignUpScreen = _interopRequireDefault(require(\"../screens/SignUpScreen\"));\nvar _ConfirmEmailScreen = _interopRequireDefault(require(\"../screens/ConfirmEmailScreen\"));\nvar _ForgotPasswordScreen = _interopRequireDefault(require(\"../screens/ForgotPasswordScreen\"));\nvar _NewPasswordScreen = _interopRequireDefault(require(\"../screens/NewPasswordScreen\"));\nvar _HomeScreen = _interopRequireDefault(require(\"../screens/HomeScreen\"));\nvar _awsAmplify = require(\"aws-amplify\");\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _this = this,\n  _jsxFileName = \"/Users/haoranwu/Desktop/login/loginProject/src/navigation/index.tsx\";\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar Stack = (0, _nativeStack.createNativeStackNavigator)();\nvar Navigation = function Navigation() {\n  var _useState = (0, _react.useState)('loading'),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    online = _useState2[0],\n    setOnline = _useState2[1];\n  var checkUser = function () {\n    var _ref = (0, _asyncToGenerator2.default)(function* () {\n      try {\n        var user = yield _awsAmplify.Auth.currentAuthenticatedUser({\n          bypassCache: true\n        });\n        setOnline('online');\n      } catch (e) {\n        setOnline('offline');\n      }\n    });\n    return function checkUser() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  (0, _react.useEffect)(function () {\n    checkUser();\n  }, []);\n  (0, _react.useEffect)(function () {\n    var listener = function listener(data) {\n      if (data.payload.event == 'signIn' || data.payload.event == 'signOut') {\n        checkUser();\n      }\n    };\n    _awsAmplify.Hub.listen('auth', listener);\n    return function () {\n      return _awsAmplify.Hub.remove('auth', listener);\n    };\n  }, []);\n  if (online == 'loading') {\n    return (0, _jsxRuntime.jsx)(_reactNative.View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: (0, _jsxRuntime.jsx)(_reactNative.ActivityIndicator, {})\n    });\n  }\n  return (0, _jsxRuntime.jsx)(_native.NavigationContainer, {\n    children: (0, _jsxRuntime.jsx)(Stack.Navigator, {\n      screenOptions: {\n        headerShown: false\n      },\n      children: online == 'online' ? (0, _jsxRuntime.jsx)(Stack.Screen, {\n        name: \"Home\",\n        component: _HomeScreen.default\n      }) : (0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {\n        children: [(0, _jsxRuntime.jsx)(Stack.Screen, {\n          name: \"SignIn\",\n          component: _SignInScreen.default\n        }), (0, _jsxRuntime.jsx)(Stack.Screen, {\n          name: \"SignUp\",\n          component: _SignUpScreen.default\n        }), (0, _jsxRuntime.jsx)(Stack.Screen, {\n          name: \"ConfrimEmail\",\n          component: _ConfirmEmailScreen.default\n        }), (0, _jsxRuntime.jsx)(Stack.Screen, {\n          name: \"ForgotPassword\",\n          component: _ForgotPasswordScreen.default\n        }), (0, _jsxRuntime.jsx)(Stack.Screen, {\n          name: \"NewPassword\",\n          component: _NewPasswordScreen.default\n        })]\n      })\n    })\n  });\n};\nvar _default = Navigation;\nexports.default = _default;","map":{"version":3,"names":["_reactNative","require","_react","_interopRequireWildcard","_native","_nativeStack","_SignInScreen","_interopRequireDefault","_SignUpScreen","_ConfirmEmailScreen","_ForgotPasswordScreen","_NewPasswordScreen","_HomeScreen","_awsAmplify","_jsxRuntime","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Stack","createNativeStackNavigator","Navigation","_useState","useState","_useState2","_slicedToArray2","online","setOnline","checkUser","_ref","_asyncToGenerator2","user","Auth","currentAuthenticatedUser","bypassCache","e","apply","arguments","useEffect","listener","data","payload","event","Hub","listen","remove","jsx","View","style","flex","justifyContent","alignItems","children","ActivityIndicator","NavigationContainer","Navigator","screenOptions","headerShown","Screen","name","component","HomeScreen","jsxs","Fragment","SignInScreen","SignUpScreen","ConfrimEmailScreen","ForgotPasswordScreen","NewPasswordScreen","_default","exports"],"sources":["/Users/haoranwu/Desktop/login/loginProject/src/navigation/index.tsx"],"sourcesContent":["import {View, Text, ActivityIndicator} from 'react-native';\nimport React, {useEffect, useState} from 'react';\nimport {NavigationContainer} from '@react-navigation/native';\nimport {createNativeStackNavigator} from '@react-navigation/native-stack';\n\nimport SignInScreen from '../screens/SignInScreen';\nimport SignUpScreen from '../screens/SignUpScreen';\nimport ConfrimEmailScreen from '../screens/ConfirmEmailScreen';\nimport ForgotPasswordScreen from '../screens/ForgotPasswordScreen';\nimport NewPasswordScreen from '../screens/NewPasswordScreen';\nimport HomeScreen from '../screens/HomeScreen';\nimport {RootStackParamList} from './paramList';\nimport {Auth, Hub} from 'aws-amplify';\nconst Stack = createNativeStackNavigator<RootStackParamList>();\n\nconst Navigation = () => {\n  const [online, setOnline] = useState('loading');\n  const checkUser = async () => {\n    try {\n      const user = await Auth.currentAuthenticatedUser({bypassCache: true});\n      setOnline('online');\n    } catch (e) {\n      setOnline('offline');\n    }\n  };\n  useEffect(() => {\n    checkUser();\n  }, []);\n  useEffect(() => {\n    const listener = (data: any) => {\n      if (data.payload.event == 'signIn' || data.payload.event == 'signOut') {\n        checkUser();\n      }\n    };\n    Hub.listen('auth', listener);\n    return () => Hub.remove('auth', listener);\n  }, []);\n  if (online == 'loading') {\n    return (\n      <View\n        style={{\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}>\n        <ActivityIndicator />\n      </View>\n    );\n  }\n  return (\n    <NavigationContainer>\n      <Stack.Navigator screenOptions={{headerShown: false}}>\n        {online == 'online' ? (\n          <Stack.Screen name=\"Home\" component={HomeScreen} />\n        ) : (\n          <>\n            <Stack.Screen name=\"SignIn\" component={SignInScreen} />\n            <Stack.Screen name=\"SignUp\" component={SignUpScreen} />\n            <Stack.Screen name=\"ConfrimEmail\" component={ConfrimEmailScreen} />\n            <Stack.Screen\n              name=\"ForgotPassword\"\n              component={ForgotPasswordScreen}\n            />\n            <Stack.Screen name=\"NewPassword\" component={NewPasswordScreen} />\n          </>\n        )}\n      </Stack.Navigator>\n    </NavigationContainer>\n  );\n};\n\nexport default Navigation;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}